<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Session II: Programmability Aspects of Tokenization</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            line-height: 1.6;
        }

        .container {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            position: relative;
        }

        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 2.4em;
            background: linear-gradient(135deg, #3498db, #2980b9);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .duration {
            text-align: center;
            color: #7f8c8d;
            margin-bottom: 30px;
            font-size: 1.2em;
            font-weight: 500;
        }

        .section {
            margin: 40px 0;
            padding: 25px;
            background: #f8f9fa;
            border-radius: 12px;
            border-left: 5px solid #3498db;
        }

        .section h2 {
            color: #2c3e50;
            font-size: 1.8em;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e9ecef;
        }

        .section h3 {
            color: #34495e;
            font-size: 1.4em;
            margin: 25px 0 15px 0;
        }

        .section h4 {
            color: #34495e;
            font-size: 1.2em;
            margin: 20px 0 10px 0;
        }

        .subsection {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            border: 1px solid #dee2e6;
        }

        .steps {
            background: #e3f2fd;
            padding: 20px;
            border-radius: 8px;
            margin: 15px 0;
        }

        .steps h4 {
            color: #1976d2;
            margin-top: 0;
        }

        .steps ol {
            margin: 10px 0;
        }

        .steps li {
            margin: 8px 0;
            padding: 5px 0;
        }

        .code-container {
            position: relative;
            margin: 20px 0;
            background: #2d3748;
            border-radius: 8px;
            overflow: hidden;
        }

        .code-header {
            background: #1a202c;
            padding: 10px 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #4a5568;
        }

        .code-title {
            color: #e2e8f0;
            font-size: 14px;
            font-weight: 500;
        }

        .copy-btn {
            background: #3182ce;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            transition: background 0.2s ease;
        }

        .copy-btn:hover {
            background: #2c5aa0;
        }

        .copy-btn:active {
            background: #2a4a7c;
        }

        .copy-btn.copied {
            background: #38a169;
        }

        pre {
            margin: 0;
            padding: 20px;
            background: #2d3748;
            color: #e2e8f0;
            overflow-x: auto;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 14px;
            line-height: 1.4;
        }

        code {
            background: #edf2f7;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 0.9em;
            color: #2d3748;
        }

        .highlight {
            background: #fff3cd;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #ffc107;
            margin: 15px 0;
        }

        .info-box {
            background: #d1ecf1;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #17a2b8;
            margin: 15px 0;
        }

        .warning-box {
            background: #f8d7da;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #dc3545;
            margin: 15px 0;
        }

        .concept-box {
            background: #d4edda;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #28a745;
            margin: 20px 0;
        }

        .concept-box h4 {
            color: #155724;
            margin-top: 0;
        }

        .table-container {
            overflow-x: auto;
            margin: 20px 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #dee2e6;
        }

        th {
            background: #3498db;
            color: white;
            font-weight: 600;
        }

        tr:nth-child(even) {
            background: #f8f9fa;
        }

        .tag {
            background: #e9ecef;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.85em;
            margin: 2px;
            display: inline-block;
        }

        .navigation {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            max-width: 250px;
            z-index: 1000;
        }

        .navigation h4 {
            margin-top: 0;
            color: #2c3e50;
        }

        .navigation ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .navigation li {
            margin: 8px 0;
        }

        .navigation a {
            color: #3498db;
            text-decoration: none;
            font-size: 0.9em;
        }

        .navigation a:hover {
            color: #2980b9;
            text-decoration: underline;
        }

        @media (max-width: 768px) {
            .navigation {
                display: none;
            }
            
            body {
                padding: 10px;
            }
            
            .container {
                padding: 20px;
            }
            
            h1 {
                font-size: 2em;
            }
        }

        .scroll-top {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            cursor: pointer;
            font-size: 18px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
            opacity: 0;
            visibility: hidden;
        }

        .scroll-top.visible {
            opacity: 1;
            visibility: visible;
        }

        .scroll-top:hover {
            background: #2980b9;
            transform: translateY(-2px);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Session II: Programmability Aspects of Tokenization</h1>
        <div class="duration">Duration: 4 Hours</div>

        <div class="navigation">
            <h4>Navigation</h4>
            <ul>
                <li><a href="#environment">Environment Setup</a></li>
                <li><a href="#metamask">MetaMask</a></li>
                <li><a href="#remix">Remix IDE</a></li>
                <li><a href="#erc20">ERC-20 Implementation</a></li>
                <li><a href="#erc721">ERC-721 Implementation</a></li>
                <li><a href="#fractionalized">Fractionalized Real Estate</a></li>
                <li><a href="#standards">ERC Standards Summary</a></li>
            </ul>
        </div>

        <div class="section" id="environment">
            <h2>Setting up Environment</h2>
            
            <div class="subsection" id="metamask">
                <h3>MetaMask</h3>
                
                <div class="steps">
                    <h4>Step-by-Step MetaMask Installation:</h4>
                    <ol>
                        <li><strong>Install the Extension</strong>
                            <ul>
                                <li>Go to metamask.io</li>
                                <li>Click "Download" and select your browser (Chrome, Firefox, Edge, etc.)</li>
                                <li>Add the extension to your browser</li>
                                <li>Pin the extension to your browser toolbar for easy access</li>
                            </ul>
                        </li>
                        
                        <li><strong>Create a New Wallet</strong>
                            <ul>
                                <li>Click "Get Started" when MetaMask opens</li>
                                <li>Select "Create a wallet"</li>
                                <li>Create a strong password (minimum 8 characters)</li>
                                <li><span style="color: #dc3545; font-weight: bold;">CRITICAL</span>: Write down your 12-word recovery phrase and store it securely</li>
                                <li>Never share this phrase with anyone - it's the key to your wallet</li>
                            </ul>
                        </li>
                        
                        <li><strong>Connect to Test Networks</strong>
                            <ul>
                                <li>Click the network dropdown (usually shows "Ethereum Mainnet")</li>
                                <li>Toggle "Show test networks" in Settings > Advanced</li>
                                <li>Select "Sepolia test network" for testing</li>
                                <li>Get free test ETH from a Sepolia faucet (sepolia.dev or faucets.chain.link)</li>
                            </ul>
                        </li>
                    </ol>
                </div>
            </div>

            <div class="subsection" id="remix">
                <h3>Remix IDE</h3>
                
                <div class="steps">
                    <h4>Accessing and Configuring Remix:</h4>
                    <ol>
                        <li><strong>Access Remix</strong>
                            <ul>
                                <li>Go to remix.ethereum.org in your browser</li>
                                <li>The IDE loads automatically - no installation required</li>
                                <li>Familiarize yourself with the interface: File Explorer, Editor, Terminal</li>
                            </ul>
                        </li>
                        
                        <li><strong>Connect Remix to MetaMask</strong>
                            <ul>
                                <li>In Remix, go to the "Deploy & Run Transactions" tab</li>
                                <li>In the "Environment" dropdown, select "Injected Provider - MetaMask"</li>
                                <li>MetaMask will prompt you to connect - click "Connect"</li>
                                <li>Ensure you're on the Sepolia test network in both Remix and MetaMask</li>
                            </ul>
                        </li>
                    </ol>
                </div>
            </div>


                      <div class="subsection" id="IPFS">
                <h3>Installing IPFS</h3>
                
                <div class="steps">
                    <h4>Open document: Ipfs_NFT_Guide.html </h4>
                   
                </div>
            </div>
            
            
            <div class="concept-box">
                <h4>Smart Contracts and Their Role in Tokenization</h4>
                <p>Smart contracts are self-executing programs that automatically enforce the terms of an agreement when predetermined conditions are met. In tokenization, smart contracts serve as the digital representation of assets, automatically handling transfers, dividend distributions, voting rights, and compliance requirements. For example, a real estate token smart contract can automatically distribute rental income to token holders proportionally to their ownership stakes without human intervention.</p>
            </div>
        </div>

        <div class="section" id="erc20">
            <h2>ERC-20 Implementation</h2>
            
            <div class="subsection">
                <h3>Basic ERC-20 Example</h3>
                
                <div class="steps">
                    <h4>Step 1: Create a New File in Remix</h4>
                    <ol>
                        <li>Open Remix IDE (remix.ethereum.org)</li>
                        <li>In the File Explorer, right-click on "contracts" folder</li>
                        <li>Create a new file called <code>LuxembourgGoldToken.sol</code></li>
                    </ol>
                </div>
                
                <div class="steps">
                    <h4>Step 2: Write the Smart Contract</h4>
                </div>
                
                <div class="code-container">
                    <div class="code-header">
                        <span class="code-title">LuxembourgGoldToken.sol</span>
                        <button class="copy-btn" onclick="copyToClipboard('goldTokenCode')">Copy</button>
                    </div>
                    <pre id="goldTokenCode">// SPDX-License-Identifier: MIT
pragma solidity ^0.8.19;

// Import OpenZeppelin contracts for standard ERC-20 functionality and access control
import "@openzeppelin/contracts/token/ERC20/ERC20.sol";
import "@openzeppelin/contracts/access/Ownable.sol";

/**
 * @title LuxembourgGoldToken
 * @dev ERC-20 token backed by physical gold reserves
 * Each token represents a claim on actual gold stored in secure vaults
 * Maintains 1:1 backing ratio between digital tokens and physical gold
 */
contract LuxembourgGoldToken is ERC20, Ownable {
    
    /**
     * @dev Total amount of physical gold backing the tokens
     * Measured in the same units as token supply (typically grams or ounces)
     * This creates transparency and maintains the backing ratio
     */
    uint256 public totalGoldReserves;
    
    /**
     * @dev Constructor initializes the gold-backed token
     * Sets the deployer as the initial owner who can mint/manage tokens
     * No tokens exist initially - they must be minted when gold is deposited
     */
    constructor() 
        ERC20("Luxembourg Gold Token", "LUXGOLD")  // Token name and symbol
        Ownable(msg.sender)  // Set deployer as owner
    {
        // Initially no tokens exist until gold is deposited and verified
        // This ensures tokens are always backed by real gold reserves
    }
    
    /**
     * @dev Mints new tokens when physical gold is deposited
     * Only the owner can mint, ensuring controlled token creation
     * Simultaneously increases both token supply and recorded gold reserves
     * 
     * @param to Address that will receive the newly minted tokens
     * @param amount Number of tokens to mint (should equal gold deposited)
     * 
     * Requirements:
     * - Caller must be contract owner
     * - Physical gold must be deposited and verified before calling
     * - Amount should correspond to actual gold deposited
     */
    function mint(address to, uint256 amount) public onlyOwner {
        // Create new tokens for the recipient
        _mint(to, amount);
        // Increase recorded gold reserves to maintain backing ratio
        totalGoldReserves += amount;
        
        // Note: In production, this should include verification that
        // corresponding physical gold has actually been deposited
    }
    
    /**
     * @dev Burns tokens when holder wants to redeem physical gold
     * Anyone can burn their own tokens to redeem gold
     * Reduces both token supply and recorded gold reserves
     * 
     * @param amount Number of tokens to burn and redeem for gold
     * 
     * Requirements:
     * - Caller must own sufficient tokens
     * - Physical gold withdrawal process should be initiated
     */
    function burn(uint256 amount) public {
        // Destroy tokens from caller's balance
        _burn(msg.sender, amount);
        // Reduce recorded gold reserves proportionally
        totalGoldReserves -= amount;
        
        // Note: In production, this should trigger physical gold
        // withdrawal process from secure storage
    }
    
    /**
     * @dev Calculates how much gold each token represents
     * Provides transparency about the backing ratio
     * Returns value with decimal precision matching token decimals
     * 
     * @return Amount of gold per token (with decimal precision)
     * 
     * Example: If 1000 tokens backed by 1000g gold, returns 1000000000000000000 (1.0 with 18 decimals)
     */
    function getGoldPerToken() public view returns (uint256) {
        // Prevent division by zero if no tokens exist
        if (totalSupply() == 0) return 0;
        
        // Calculate gold per token with proper decimal handling
        // Multiply reserves by 10^decimals to maintain precision
        return (totalGoldReserves * 10**decimals()) / totalSupply();
    }
}</pre>
                </div>
                
                <div class="steps">
                    <h4>Step 3: Compile and Deploy</h4>
                    <ol>
                        <li>Go to the "Solidity Compiler" tab in Remix</li>
                        <li>Select compiler version 0.8.19</li>
                        <li>Click "Compile LuxembourgGoldToken.sol"</li>
                        <li>Go to "Deploy & Run Transactions" tab</li>
                        <li>Select "LuxembourgGoldToken" from the contract dropdown</li>
                        <li>Click "Deploy"</li>
                        <li>Confirm the transaction in MetaMask</li>
                    </ol>
                </div>
                
                <div class="steps">
                    <h4>Step 4: Test Your Contract</h4>
                    <p>Once deployed, try these interactions:</p>
                    <ol>
                        <li>Call <code>name()</code> → Should return "Luxembourg Gold Token"</li>
                        <li>Call <code>symbol()</code> → Should return "LUXGOLD"</li>
                        <li>Call <code>totalSupply()</code> → Should return 0 initially</li>
                        <li>Call <code>mint</code> with your address and amount 1000</li>
                        <li>Call <code>totalSupply()</code> again → Should now show 1000</li>
                        <li>Call <code>balanceOf</code> with your address → Should show 1000</li>
                    </ol>
                </div>
            </div>
        </div>

        <div class="section" id="erc721">
            <h2>ERC-721 Implementation</h2>
            
            <div class="subsection">
                <h3>Real Estate NFT Contract</h3>
                
                <div class="concept-box">
                    <h4>What is a Real Estate NFT?</h4>
                    <p>A Real Estate NFT (Non-Fungible Token) represents digital ownership of a unique piece of real property on the blockchain. Unlike traditional real estate ownership which relies on paper deeds and government registries, Real Estate NFTs create an immutable, transparent, and easily transferable record of property ownership. Each property is represented by a unique token that contains all relevant information about the real estate asset.</p>
                </div>
                
                <div class="info-box">
                    <h4>How Real Estate NFTs Work</h4>
                    <p>The Real Estate NFT system operates through several interconnected components that work together to create a comprehensive property ownership and management system:</p>
                    
                    <p><strong>Property Information Storage:</strong> Each NFT contains comprehensive data about the property:</p>
                    <ul>
                        <li><strong>Physical Characteristics</strong>: Square footage, number of rooms, lot size, architectural style, year built</li>
                        <li><strong>Location Data</strong>: Precise GPS coordinates, address, neighborhood information, zoning classification</li>
                        <li><strong>Financial Data</strong>: Current valuation, purchase price history, property tax information, insurance details</li>
                        <li><strong>Legal Information</strong>: Title status, liens, easements, property rights, zoning restrictions</li>
                        <li><strong>Condition Reports</strong>: Inspection results, maintenance history, renovation records, environmental assessments</li>
                    </ul>
                    
                    <p><strong>Digital Identity and Verification:</strong> The smart contract creates a unique digital identity for each property:</p>
                    <ul>
                        <li><strong>Unique Token ID</strong>: Each property receives a permanent, unchangeable identifier on the blockchain</li>
                        <li><strong>Metadata Linking</strong>: Connection to off-chain data storage (typically IPFS) containing detailed property information</li>
                        <li><strong>Authenticity Verification</strong>: Cryptographic proof that the token represents the actual property</li>
                        <li><strong>Ownership Trail</strong>: Complete history of all previous owners and transactions</li>
                    </ul>
                </div>
                
                <div class="highlight">
                    <h4>What is Tokenized in Real Estate NFTs</h4>
                    <p>Real Estate NFTs can tokenize various aspects of property ownership and rights:</p>
                    
                    <p><strong>Complete Property Ownership:</strong> The most straightforward approach where the NFT represents 100% ownership of a property:</p>
                    <ul>
                        <li><strong>Fee Simple Ownership</strong>: Full ownership rights including the right to use, modify, rent, or sell the property</li>
                        <li><strong>Title Transfer</strong>: The NFT transfer represents a legal transfer of property ownership</li>
                        <li><strong>All Associated Rights</strong>: Mineral rights, air rights, development rights, and any other property-related rights</li>
                        <li><strong>Responsibilities</strong>: Property taxes, maintenance obligations, and compliance with local regulations</li>
                    </ul>
                    
                    <p><strong>Fractional Ownership Rights:</strong> NFTs can represent partial ownership in a property:</p>
                    <ul>
                        <li><strong>Percentage Ownership</strong>: Each NFT represents a specific percentage of the property (e.g., 10%, 25%, 50%)</li>
                        <li><strong>Income Rights</strong>: Right to receive proportional rental income from the property</li>
                        <li><strong>Appreciation Rights</strong>: Right to benefit from property value appreciation</li>
                        <li><strong>Usage Rights</strong>: Time-sharing or rotation-based usage of the property</li>
                    </ul>
                    
                    <p><strong>Specific Property Rights:</strong> NFTs can tokenize individual rights associated with a property:</p>
                    <ul>
                        <li><strong>Development Rights</strong>: Right to build or develop on the property</li>
                        <li><strong>Air Rights</strong>: Right to build above the property or use the airspace</li>
                        <li><strong>Mineral Rights</strong>: Right to extract natural resources from the property</li>
                        <li><strong>Water Rights</strong>: Access to water sources on or adjacent to the property</li>
                        <li><strong>Easement Rights</strong>: Right of way or access across the property</li>
                    </ul>
                    
                    <p><strong>Income-Generating Assets:</strong> Properties that produce rental income can be tokenized with automatic distribution mechanisms:</p>
                    <ul>
                        <li><strong>Rental Income Streams</strong>: Automatic distribution of monthly rental payments to NFT holders</li>
                        <li><strong>Commercial Lease Income</strong>: Distribution of income from commercial tenants</li>
                        <li><strong>Parking Revenue</strong>: Income from parking spaces or garages</li>
                        <li><strong>Additional Revenue Sources</strong>: Income from cell towers, billboards, or other property-based revenue</li>
                    </ul>
                </div>
                
                <div class="steps">
                    <h4>Real Estate NFT Example</h4>
                    
                    <p><strong>Step 1: Create New File</strong></p>
                    <ol>
                        <li>In Remix, create a new file called <code>LuxembourgRealEstateNFT.sol</code></li>
                    </ol>
                    
                    <p><strong>Step 2: Write the Real Estate NFT Contract</strong></p>
                </div>
                
                <div class="code-container">
                    <div class="code-header">
                        <span class="code-title">LuxembourgRealEstateNFT.sol</span>
                        <button class="copy-btn" onclick="copyToClipboard('realEstateNFTCode')">Copy</button>
                    </div>
                    <pre id="realEstateNFTCode">// SPDX-License-Identifier: MIT
pragma solidity ^0.8.19;

// Import OpenZeppelin contracts
import "@openzeppelin/contracts/token/ERC20/ERC20.sol";         // ERC20 token standard
import "@openzeppelin/contracts/access/Ownable.sol";            // Access control (onlyOwner)
import "@openzeppelin/contracts/security/ReentrancyGuard.sol";  // Protection against reentrancy attacks
import "@openzeppelin/contracts/token/ERC721/IERC721.sol";      // ERC721 interface (for linking the NFT)

/// @title FractionalizedRealEstate
/// @notice This contract fractionalizes an NFT (real estate) into ERC20 shares.
/// @dev Shareholders can claim ETH rental income proportional to their holdings.
contract FractionalizedRealEstate is ERC20, Ownable, ReentrancyGuard {
    /// @notice The NFT contract representing the real estate
    IERC721 public immutable nftContract;

    /// @notice The specific NFT token ID being fractionalized
    uint256 public immutable tokenId;

    /// @notice Total number of shares issued (scaled by 1e18 for ERC20 decimals)
    uint256 public immutable totalShares;

    /// @notice Tracks total dividends (ETH) owed per share
    /// @dev Stored as a fixed-point number with 18 decimals
    uint256 public totalDividendsPerShare;

    /// @notice Tracks how much each shareholder has already withdrawn
    mapping(address => uint256) public withdrawnDividends;

    /// @notice Emitted whenever rental income is deposited
    event RentalIncomeDeposited(uint256 amount);

    /// @notice Emitted when a shareholder claims dividends
    event DividendsClaimed(address indexed shareholder, uint256 amount);

    /// @param _nftContract Address of the NFT collection
    /// @param _tokenId Token ID of the NFT representing the real estate
    /// @param _totalShares Number of ERC20 shares to issue
    /// @param _name ERC20 token name
    /// @param _symbol ERC20 token symbol
    constructor(
        address _nftContract,
        uint256 _tokenId,
        uint256 _totalShares,
        string memory _name,
        string memory _symbol
    ) 
        ERC20(_name, _symbol) 
        Ownable(msg.sender) // OZ v5 requires passing initial owner explicitly
    {
        nftContract = IERC721(_nftContract);
        tokenId = _tokenId;

        // Scale totalShares by 1e18 to match ERC20 decimals (18)
        totalShares = _totalShares * 10 ** 18;

        // Mint all shares to the deployer (initial owner)
        _mint(msg.sender, totalShares);
    }

    /// @notice Deposit ETH rental income into the contract
    /// @dev Only the owner (e.g., property manager) can deposit
    function depositRentalIncome() public payable onlyOwner {
        require(msg.value > 0, "No ETH sent");

        // Calculate how much ETH is owed per share
        uint256 amountPerShare = (msg.value * 1e18) / totalShares;

        // Increase the global dividends per share
        totalDividendsPerShare += amountPerShare;

        emit RentalIncomeDeposited(msg.value);
    }

    /// @notice Claim available dividends for the caller
    /// @dev Uses nonReentrant to prevent reentrancy attacks
    function claimDividends() public nonReentrant {
        // Calculate owed dividends
        uint256 owed = calculateDividends(msg.sender);
        require(owed > 0, "No dividends available");

        // Update withdrawn balance
        withdrawnDividends[msg.sender] += owed;

        // Transfer ETH to shareholder
        payable(msg.sender).transfer(owed);

        emit DividendsClaimed(msg.sender, owed);
    }

    /// @notice Calculate how much dividends a shareholder can claim
    /// @param shareholder Address of the shareholder
    /// @return Amount of ETH they can currently claim
    function calculateDividends(address shareholder) public view returns (uint256) {
        uint256 shareholderBalance = balanceOf(shareholder);

        // Total dividends owed based on current per-share rate
        uint256 gross = (shareholderBalance * totalDividendsPerShare) / 1e18;

        // Subtract what the shareholder has already withdrawn
        return gross - withdrawnDividends[shareholder];
    }
}</pre>
                </div>
                
                <div class="steps">
                    <h4>Step 3: Compile and Deploy</h4>
                    <ol>
                        <li>Compile the contract in Remix</li>
                        <li>Deploy to Sepolia network using MetaMask</li>
                        <li>Confirm the deployment transaction</li>
                    </ol>
                </div>
                
                <div class="steps">
                    <h4>Step 4: Test Real Estate NFT Functions</h4>
                    
                    <p><strong>1. Add Yourself as Verified Appraiser</strong></p>
                    <div class="code-container">
                        <div class="code-header">
                            <span class="code-title">Function Call</span>
                            <button class="copy-btn" onclick="copyToClipboard('addAppraiser')">Copy</button>
                        </div>
                        <pre id="addAppraiser">Call: addVerifiedAppraiser(YOUR_ADDRESS)</pre>
                    </div>
                    
                    <p><strong>2. Mint a Property NFT</strong></p>
                    <div class="code-container">
                        <div class="code-header">
                            <span class="code-title">Function Call</span>
                            <button class="copy-btn" onclick="copyToClipboard('mintProperty')">Copy</button>
                        </div>
                        <pre id="mintProperty">Call: mintProperty
Parameters:
- to: YOUR_ADDRESS
- propertyAddress: "123 Avenue de la Liberté, Luxembourg City"
- area: 150 (150 square meters)
- valuation: 850000 (€850,000)
- propertyType: "Residential"
- tokenURI: "https://metadata.example.com/property/1"</pre>
                    </div>
                    
                    <p><strong>3. Verify the Property</strong></p>
                    <div class="code-container">
                        <div class="code-header">
                            <span class="code-title">Function Call</span>
                            <button class="copy-btn" onclick="copyToClipboard('verifyProperty')">Copy</button>
                        </div>
                        <pre id="verifyProperty">Call: properties(0)  // Token ID 0</pre>
                    </div>
                    
                    <p><strong>4. Check Property Details</strong></p>
                    <div class="code-container">
                        <div class="code-header">
                            <span class="code-title">Function Call</span>
                            <button class="copy-btn" onclick="copyToClipboard('getProperty')">Copy</button>
                        </div>
                        <pre id="getProperty">Call: getProperty(0)</pre>
                    </div>
                </div>
            </div>
        </div>

        <div class="section" id="fractionalized">
            <h2>Fractionalized Real Estate Contract</h2>
            
            <div class="concept-box">
                <h4>What is Fractional Real Estate Tokenization?</h4>
                <p>Fractional Real Estate tokenization takes the concept of Real Estate NFTs one step further by dividing property ownership into multiple tradeable tokens. While a Real Estate NFT represents ownership of an entire property, fractionalized tokens represent ownership of specific portions or shares of that property. This approach makes high-value real estate accessible to smaller investors while maintaining the benefits of blockchain-based ownership.</p>
            </div>
            
            <div class="info-box">
                <h4>The Complete Fractionalization Process</h4>
                
                <p><strong>Step 1: Initial Property Acquisition and NFT Creation</strong><br>
                The process begins when a property owner decides to fractionalize their real estate:</p>
                <ul>
                    <li><strong>Property Assessment</strong>: A €2 million luxury apartment in Luxembourg City is professionally appraised</li>
                    <li><strong>Legal Structure Creation</strong>: An LLC or special purpose vehicle (SPV) is created to hold the property</li>
                    <li><strong>NFT Minting</strong>: The property is tokenized as a unique NFT using our Real Estate NFT contract</li>
                    <li><strong>NFT Transfer</strong>: The NFT is transferred to the LLC, establishing legal ownership</li>
                </ul>
                
                <p><strong>Step 2: Fractional Token Contract Deployment</strong><br>
                A new smart contract is deployed specifically for this property:</p>
                <ul>
                    <li><strong>Contract Deployment</strong>: The FractionalizedRealEstate contract is deployed with specific parameters</li>
                    <li><strong>Token Creation</strong>: 2,000,000 ERC-20 tokens are created, each representing €1 worth of the property</li>
                    <li><strong>Share Distribution</strong>: Initially, all 2,000,000 tokens are held by the property owner</li>
                    <li><strong>Market Preparation</strong>: The tokens are prepared for sale to investors</li>
                </ul>
                
                <p><strong>Step 3: Token Sale and Distribution</strong><br>
                Investors can purchase fractional ownership:</p>
                <ul>
                    <li><strong>Public Sale</strong>: Tokens are sold to investors at €1 each</li>
                    <li><strong>Minimum Investment</strong>: Investors can buy as few as 100 tokens (€100 minimum investment)</li>
                    <li><strong>KYC/AML Compliance</strong>: All investors must complete identity verification</li>
                    <li><strong>Legal Documentation</strong>: Investors receive legal documents outlining their rights and obligations</li>
                </ul>
                
                <p><strong>Step 4: Ongoing Management and Income Distribution</strong><br>
                The smart contract automates ongoing property management:</p>
                <ul>
                    <li><strong>Rent Collection</strong>: Monthly rental income (€8,000) is deposited into the contract</li>
                    <li><strong>Expense Deduction</strong>: Property management fees, taxes, and maintenance costs are deducted</li>
                    <li><strong>Income Distribution</strong>: Net income is automatically distributed to token holders proportionally</li>
                    <li><strong>Governance Voting</strong>: Major decisions are put to token holder votes</li>
                </ul>
            </div>
            
            <div class="code-container">
                <div class="code-header">
                    <span class="code-title">FractionalizedRealEstate.sol</span>
                    <button class="copy-btn" onclick="copyToClipboard('fractionalizedCode')">Copy</button>
                </div>
                <pre id="fractionalizedCode">// SPDX-License-Identifier: MIT
pragma solidity ^0.8.19;

import "@openzeppelin/contracts/token/ERC20/ERC20.sol";
import "@openzeppelin/contracts/access/Ownable.sol";
import "@openzeppelin/contracts/security/ReentrancyGuard.sol";

contract FractionalizedRealEstate is ERC20, Ownable, ReentrancyGuard {
    IERC721 public immutable nftContract;
    uint256 public immutable tokenId;
    uint256 public immutable totalShares;
    uint256 public rentalIncome;
    
    mapping(address => uint256) public lastClaimTime;
    
    event RentalIncomeDistributed(uint256 amount);
    event DividendsClaimed(address indexed shareholder, uint256 amount);
    
    constructor(
        address _nftContract,
        uint256 _tokenId,
        uint256 _totalShares,
        string memory _name,
        string memory _symbol
    ) ERC20(_name, _symbol) {
        nftContract = IERC721(_nftContract);
        tokenId = _tokenId;
        totalShares = _totalShares * 10**18;
        
        _mint(msg.sender, totalShares);
    }
    
    function depositRentalIncome() public payable onlyOwner {
        rentalIncome += msg.value;
        emit RentalIncomeDistributed(msg.value);
    }
    
    function claimDividends() public nonReentrant {
        uint256 shareholderBalance = balanceOf(msg.sender);
        require(shareholderBalance > 0, "No shares owned");
        
        uint256 dividend = (rentalIncome * shareholderBalance) / totalShares;
        require(dividend > 0, "No dividends available");
        
        lastClaimTime[msg.sender] = block.timestamp;
        payable(msg.sender).transfer(dividend);
        
        emit DividendsClaimed(msg.sender, dividend);
    }
    
    function calculateDividends(address shareholder) public view returns (uint256) {
        uint256 shareholderBalance = balanceOf(shareholder);
        return (rentalIncome * shareholderBalance) / totalShares;
    }
    
    function _beforeTokenTransfer(
        address from,
        address to,
        uint256 amount
    ) internal override {
        require(from == address(0) || to == address(0), "Transfers restricted");
        super._beforeTokenTransfer(from, to, amount);
    }
}</pre>
            </div>
        </div>

        <div class="section" id="standards">
            <h2>ERC Standards Summary for Tokenization</h2>
            
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>ERC Standard</th>
                            <th>Token Type</th>
                            <th>Tokenization Use Cases</th>
                            <th>Key Characteristics</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>ERC-20</strong></td>
                            <td>Fungible</td>
                            <td>
                                <div class="tag">Commodity tokenization (gold, oil, agricultural products)</div>
                                <div class="tag">Investment fund shares</div>
                                <div class="tag">Stablecoins and currencies</div>
                                <div class="tag">Loyalty points and rewards</div>
                                <div class="tag">Carbon credits</div>
                            </td>
                            <td>
                                <div class="tag">All tokens identical</div>
                                <div class="tag">Divisible</div>
                                <div class="tag">Easy to trade</div>
                                <div class="tag">Low gas costs</div>
                                <div class="tag">Simple implementation</div>
                            </td>
                        </tr>
                        <tr>
                            <td><strong>ERC-721</strong></td>
                            <td>Non-Fungible (NFT)</td>
                            <td>
                                <div class="tag">Real estate properties</div>
                                <div class="tag">Art and collectibles</div>
                                <div class="tag">Intellectual property (patents, copyrights)</div>
                                <div class="tag">Identity documents</div>
                                <div class="tag">Unique physical assets</div>
                            </td>
                            <td>
                                <div class="tag">Each token unique</div>
                                <div class="tag">Rich metadata support</div>
                                <div class="tag">Individual ownership tracking</div>
                                <div class="tag">High value assets</div>
                            </td>
                        </tr>
                        <tr>
                            <td><strong>ERC-1155</strong></td>
                            <td>Multi-Token</td>
                            <td>
                                <div class="tag">Gaming ecosystems (items, currencies, characters)</div>
                                <div class="tag">Complex financial products</div>
                                <div class="tag">Multi-asset portfolios</div>
                                <div class="tag">Event tickets with different tiers</div>
                                <div class="tag">Supply chain tracking</div>
                            </td>
                            <td>
                                <div class="tag">Multiple token types in one contract</div>
                                <div class="tag">Batch operations</div>
                                <div class="tag">Gas efficient</div>
                                <div class="tag">Flexible functionality</div>
                            </td>
                        </tr>
                        <tr>
                            <td><strong>ERC-1400</strong></td>
                            <td>Security Token</td>
                            <td>
                                <div class="tag">Corporate equity shares</div>
                                <div class="tag">Bonds and debt instruments</div>
                                <div class="tag">REIT tokens</div>
                                <div class="tag">Regulated investment funds</div>
                                <div class="tag">Compliant securities</div>
                            </td>
                            <td>
                                <div class="tag">Built-in compliance</div>
                                <div class="tag">Transfer restrictions</div>
                                <div class="tag">Document management</div>
                                <div class="tag">Regulatory reporting</div>
                            </td>
                        </tr>
                        <tr>
                            <td><strong>ERC-3643</strong></td>
                            <td>Compliant Security</td>
                            <td>
                                <div class="tag">Multi-jurisdictional securities</div>
                                <div class="tag">European compliant tokens</div>
                                <div class="tag">Cross-border investments</div>
                                <div class="tag">Institutional grade tokens</div>
                                <div class="tag">KYC/AML integrated assets</div>
                            </td>
                            <td>
                                <div class="tag">Advanced compliance framework</div>
                                <div class="tag">Identity registry integration</div>
                                <div class="tag">Modular rule system</div>
                                <div class="tag">Global regulatory support</div>
                            </td>
                        </tr>
                        <tr>
                            <td><strong>ERC-1450</strong></td>
                            <td>Complex Securities</td>
                            <td>
                                <div class="tag">Convertible bonds</div>
                                <div class="tag">Preferred shares</div>
                                <div class="tag">Options and warrants</div>
                                <div class="tag">Structured products</div>
                                <div class="tag">Multi-class securities</div>
                            </td>
                            <td>
                                <div class="tag">Complex financial modeling</div>
                                <div class="tag">Automated corporate actions</div>
                                <div class="tag">Multi-tier governance</div>
                                <div class="tag">Advanced rights management</div>
                            </td>
                        </tr>
                        <tr>
                            <td><strong>ERC-2980</strong></td>
                            <td>Swiss Compliant</td>
                            <td>
                                <div class="tag">FINMA compliant tokens</div>
                                <div class="tag">Swiss domiciled assets</div>
                                <div class="tag">Cross-border EU/Swiss products</div>
                                <div class="tag">Regulated Swiss funds</div>
                                <div class="tag">Banking-grade tokens</div>
                            </td>
                            <td>
                                <div class="tag">Swiss regulatory alignment</div>
                                <div class="tag">FINMA classification support</div>
                                <div class="tag">Cross-border compatibility</div>
                                <div class="tag">Banking integration</div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <button class="scroll-top" onclick="scrollToTop()">↑</button>

    <script>
        function copyToClipboard(elementId) {
            const element = document.getElementById(elementId);
            const text = element.textContent;
            
            navigator.clipboard.writeText(text).then(function() {
                const button = element.parentNode.querySelector('.copy-btn');
                const originalText = button.textContent;
                button.textContent = 'Copied!';
                button.classList.add('copied');
                
                setTimeout(function() {
                    button.textContent = originalText;
                    button.classList.remove('copied');
                }, 2000);
            }).catch(function(err) {
                console.error('Failed to copy text: ', err);
            });
        }

        function scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }

        // Show/hide scroll to top button
        window.addEventListener('scroll', function() {
            const scrollTop = document.querySelector('.scroll-top');
            if (window.pageYOffset > 300) {
                scrollTop.classList.add('visible');
            } else {
                scrollTop.classList.remove('visible');
            }
        });

        // Smooth scrolling for navigation links
        document.querySelectorAll('.navigation a').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Add syntax highlighting to code blocks
        document.addEventListener('DOMContentLoaded', function() {
            const codeBlocks = document.querySelectorAll('pre');
            codeBlocks.forEach(block => {
                // Basic syntax highlighting for Solidity
                let content = block.innerHTML;
                
                // Keywords
                content = content.replace(/\b(contract|function|constructor|modifier|event|struct|mapping|require|emit|import|pragma|solidity|public|private|internal|external|view|pure|payable|onlyOwner|nonReentrant|override|memory|storage|calldata|returns|return|if|else|for|while|uint256|address|string|bool|bytes32)\b/g, '<span style="color: #ff6b6b; font-weight: bold;">$1</span>');
                
                // Comments
                content = content.replace(/\/\/.*$/gm, '<span style="color: #999; font-style: italic;">                <p><strong>Step 1: Initial Property Acquisition and NFT Creation</strong><br>
                The process begins when a property owner decides to fractionalize their real estate:</p>
                <ul>
                    <li><strong</span>');
                content = content.replace(/\/\*[\s\S]*?\*\//g, '<span style="color: #999; font-style: italic;">                <p><strong>Step 1: Initial Property Acquisition and NFT Creation</strong><br>
                The process begins when a property owner decides to fractionalize their real estate:</p>
                <ul>
                    <li><strong</span>');
                
                // Strings
                content = content.replace(/"([^"\\]|\\.)*"/g, '<span style="color: #4ecdc4;">                <p><strong>Step 1: Initial Property Acquisition and NFT Creation</strong><br>
                The process begins when a property owner decides to fractionalize their real estate:</p>
                <ul>
                    <li><strong</span>');
                
                // Numbers
                content = content.replace(/\b\d+\b/g, '<span style="color: #ffd93d;">                <p><strong>Step 1: Initial Property Acquisition and NFT Creation</strong><br>
                The process begins when a property owner decides to fractionalize their real estate:</p>
                <ul>
                    <li><strong</span>');
                
                block.innerHTML = content;
            });
        });
    </script>
</body>
</html>